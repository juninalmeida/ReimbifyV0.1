.loading-overlay {
  --loading-accent: var(--color-brand);
  --loading-bg: var(--color-bg);
  --loading-surface: var(--color-surface);
  --loading-line: var(--color-border-strong);
  --loading-muted: var(--color-muted);
  --loading-pill: clamp(2rem, 8vw, 999rem);

  position: fixed;
  inset: 0;
  z-index: 9999;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;

  padding: var(--container-gutter);

  background-color: var(--loading-bg);

  opacity: 1;
  visibility: visible;
  transition: opacity 0.4s ease, visibility 0.4s ease;
}

.loading-overlay.hidden {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.loading-bg {
  position: absolute;
  inset: 0;
  z-index: 0;
}

.loading-bg::before {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(
    circle at center,
    rgba(52, 211, 153, 0.12) 0%,
    rgba(10, 10, 10, 0.82) 52%,
    #000 100%
  );
}

.loading-bg::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    to bottom,
    transparent 50%,
    rgba(0, 0, 0, 0.2) 50%
  );
  background-size: 100% clamp(0.1875rem, 0.15rem + 0.2vw, 0.25rem);
  opacity: 0.2;
  pointer-events: none;
}

.loading-circuit {
  position: relative;
  z-index: 10;

  width: min(50rem, 92vw);
  aspect-ratio: 16 / 9;

  display: flex;
  align-items: center;
  justify-content: center;
}

.circuit-svg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.circuit-track {
  stroke: var(--loading-line);
  stroke-width: 1;
  fill: none;
}

.circuit-line {
  stroke: url(#line-gradient);
  stroke-width: 2;
  stroke-linecap: round;
  fill: none;
  filter: url(#glow);

  stroke-dasharray: 200;
  stroke-dashoffset: 200;
  opacity: 0;
  animation: data-flow 2.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
}

.circuit-line--delay-1 {
  animation-delay: 0s;
}
.circuit-line--delay-2 {
  animation-delay: 0.8s;
}
.circuit-line--delay-3 {
  animation-delay: 1.5s;
}

@keyframes data-flow {
  0% {
    stroke-dashoffset: 200;
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  80% {
    opacity: 1;
  }
  100% {
    stroke-dashoffset: -200;
    opacity: 0;
  }
}

.circuit-node {
  fill: var(--loading-line);
}

.loading-chip {
  position: relative;
  z-index: 20;

  --pin-w: clamp(0.1875rem, 0.16rem + 0.12vw, 0.25rem);
  --pin-h: clamp(0.375rem, 0.32rem + 0.2vw, 0.5rem);
  --pin-offset: clamp(0.75rem, 0.6rem + 0.7vw, 1rem);
  --pin-radius: clamp(0.125rem, 0.1rem + 0.15vw, 0.1875rem);
}

.chip-pin {
  position: absolute;
  inline-size: var(--pin-w);
  block-size: var(--pin-h);
  background: rgba(255, 255, 255, 0.22);
}

.chip-pin--left {
  inset-inline-start: calc(var(--pin-w) * -1);
  border-radius: var(--pin-radius) 0 0 var(--pin-radius);
}
.chip-pin--right {
  inset-inline-end: calc(var(--pin-w) * -1);
  border-radius: 0 var(--pin-radius) var(--pin-radius) 0;
}

.chip-pin--top {
  inset-block-start: var(--pin-offset);
}
.chip-pin--middle {
  inset-block-start: 50%;
  transform: translateY(-50%);
}
.chip-pin--bottom {
  inset-block-end: var(--pin-offset);
}

.chip-card {
  width: clamp(10rem, 8.5rem + 6vw, 12rem);
  aspect-ratio: 3 / 2;

  background: rgba(23, 23, 23, 0.9);
  backdrop-filter: blur(clamp(0.6rem, 0.45rem + 0.6vw, 0.85rem));

  border: 1px solid var(--loading-line);
  border-radius: var(--radius-1);
  box-shadow: var(--shadow-1);

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-1);

  animation: chip-pulse 3s ease-in-out infinite;
}

@keyframes chip-pulse {
  0%,
  100% {
    box-shadow: 0 0 clamp(1rem, 0.8rem + 1vw, 1.25rem) rgba(52, 211, 153, 0.12);
    border-color: rgba(52, 211, 153, 0.12);
  }
  50% {
    box-shadow: 0 0 clamp(1.5rem, 1.1rem + 1.6vw, 2.5rem)
      rgba(52, 211, 153, 0.28);
    border-color: rgba(52, 211, 153, 0.4);
  }
}

.chip-icon-wrapper {
  position: relative;
}

.chip-icon-wrapper::before {
  content: "";
  position: absolute;
  inset: calc(var(--space-1) * -1);
  background: rgba(52, 211, 153, 0.2);
  border-radius: 50%;
  filter: blur(clamp(0.6rem, 0.45rem + 0.6vw, 0.85rem));
}

.chip-icon {
  position: relative;
  width: clamp(1.75rem, 1.55rem + 0.8vw, 2rem);
  height: clamp(1.75rem, 1.55rem + 0.8vw, 2rem);
  color: var(--loading-accent);
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

.chip-text {
  text-align: center;
}

.chip-title {
  margin: 0;
  font-size: clamp(1.05rem, 0.98rem + 0.35vw, 1.25rem);
  font-weight: 500;
  color: var(--loading-accent);
  letter-spacing: -0.01em;
  text-shadow: 0 0 clamp(0.75rem, 0.55rem + 0.8vw, 1.25rem)
    rgba(52, 211, 153, 0.45);
}

.chip-subtitle {
  margin: clamp(0.25rem, 0.18rem + 0.3vw, 0.375rem) 0 0 0;
  font-size: clamp(0.6875rem, 0.66rem + 0.12vw, 0.75rem);
  font-weight: 400;
  color: var(--loading-muted);
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.floating-label {
  position: absolute;
  display: none;
  align-items: center;
  gap: var(--space-1);

  padding: clamp(0.375rem, 0.32rem + 0.25vw, 0.5rem)
    clamp(0.75rem, 0.65rem + 0.4vw, 1rem);

  background: rgba(23, 23, 23, 0.5);
  border: 1px solid var(--loading-line);

  border-radius: clamp(0.25rem, 0.22rem + 0.2vw, 0.375rem);
  backdrop-filter: blur(clamp(0.4rem, 0.3rem + 0.4vw, 0.6rem));

  animation: pulse 2s ease-in-out infinite;
}

.floating-label--left {
  top: 25%;
  left: clamp(1.5rem, 1rem + 2vw, 2.5rem);
}

.floating-label--right {
  bottom: 25%;
  right: clamp(1.5rem, 1rem + 2vw, 2.5rem);
  animation-delay: 0.7s;
}

.floating-label__icon {
  width: clamp(0.75rem, 0.7rem + 0.2vw, 0.875rem);
  height: clamp(0.75rem, 0.7rem + 0.2vw, 0.875rem);
  color: var(--loading-accent);
}

.floating-label__text {
  font-family: var(--font-mono);
  font-size: clamp(0.75rem, 0.7rem + 0.2vw, 0.875rem);
  color: var(--loading-muted);
}

@media (min-width: 48rem) {
  .floating-label {
    display: flex;
  }
}

.loading-progress {
  position: absolute;
  bottom: clamp(2rem, 1.4rem + 2vw, 3rem);

  width: min(clamp(16rem, 14rem + 6vw, 20rem), 90vw);
}

.progress-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-bottom: var(--space-1);
}

.progress-label,
.progress-value {
  font-family: var(--font-mono);
  font-size: clamp(0.6875rem, 0.66rem + 0.12vw, 0.75rem);
}

.progress-label {
  color: var(--loading-muted);
}

.progress-value {
  color: var(--loading-accent);
}

.progress-track {
  height: clamp(0.125rem, 0.1rem + 0.1vw, 0.1875rem);
  width: 100%;
  background: rgba(255, 255, 255, 0.14);
  border-radius: var(--loading-pill);
  overflow: hidden;
}

.progress-bar {
  height: 100%;
  background: var(--loading-accent);
  box-shadow: 0 0 clamp(0.5rem, 0.4rem + 0.4vw, 0.75rem) rgba(52, 211, 153, 0.5);
  border-radius: var(--loading-pill);
  width: 0%;
  transition: width 0.3s ease;
}

@media (prefers-reduced-motion: reduce) {
  .loading-overlay {
    transition: none;
  }

  .circuit-line,
  .chip-card,
  .chip-icon,
  .floating-label {
    animation: none;
  }

  .progress-bar {
    transition: none;
  }
}
